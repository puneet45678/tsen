import React, { useState, useEffect } from 'react';
import { useRouter } from 'next/router';
import axios from 'axios';

const Tiers = (props) => {

    const [ tiersData, setTiersData ] = useState();
    const router = useRouter();

    useEffect(()=>{
        const getTiersData = async () =>{
            const tiersData = await axios.get(`${process.env.NEXT_PUBLIC_CAMPAIGN_SERVICE}/api/v1/campaigns/${props.campaignId}/field/rewardAndTier`,{
                widthCredentials: true
            })            
            setTiersData(tiersData.data.rewardAndTier);
        }
        getTiersData();
    },[])

  return (
    <div>
        <div className='relative w-full bg-cover bg-no-repeat border-[1px] border-transparent' style={{backgroundImage:`url('https://images.unsplash.com/photo-1532009172808-fe52563c17aa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80')`}}>
            <div className='absolute w-[70%] h-full bg-gradient-to-r from-black to-transparent z-0'></div>
            <div className='my-[77px] ml-[212px] z-10 relative'>
                <h1 className='text-headline-sm text-white font-[600]'>Hengstland Scouts foot and mounted</h1>
                <h2 className='mt-2 text-md text-light-neutral-50'>
                    Modular STL files for 3d printing. 300+ files of legendary warriors of the Ancient Era are ready for your game. Free bonuses and bits inside - come in!
                </h2>
            </div>            
        </div>
        <div className='mt-[46px] px-[212px]'>
            <h1 className='text-headline-2xs text-dark-neutral-700 font-[500]'>
                Tiers
            </h1>
            <div className='w-full h-[1px] bg-light-neutral-600 mt-[26px]'></div>
        </div>
        <div className='mt-6 mb-[126px] px-[212px] flex flex-col gap-6'>
            {tiersData && tiersData.map((item, index)=>(
                <div className='w-full h-fit flex bg-white rounded-[6px] shadow-xs'>
                    <div className='w-[25%] aspect-square relative overflow-hidden z-0' style={{borderRadius:"6px 0px 0px 6px"}}>                       
                        <span className={`${item.isEarlyBird ? '' : 'hidden'} absolute left-0 top-0 text-white font-[600] z-10 w-[40%] ml-[2%] mt-[6%] -rotate-45 origin-center`}>
                            Early bird
                        </span>
                        <div className={`${item.isEarlyBird ? '' : 'hidden'}  absolute left-0 top-0 w-[40%] aspect-square bg-secondary-orange-600`} style={{clipPath:'polygon(60% 0%, 100% 0%, 0% 100%, 0% 60%)'}}></div>
                        <img src={item.tierDp} className='w-full aspect-square object-cover object-right' />
                    </div>
                    <div className='w-[57%] pl-[74px] pr-6 py-6 flex flex-col border-t-[1px] border-b-[1px] border-r-[1px] border-light-neutral-700' style={{borderRadius:"0px 6px 6px 0px"}}>
                        <h3 className='text-headline-sm text-dark-neutral-700 font-[600]'>
                            $ {item.tierAmount}
                        </h3>
                        <h2 className='text-2xs text-dark-neutral-700 font-[600] mt-8 truncate'>
                            {item.tierTitle}
                        </h2>
                        <h3 className='text-xl text-dark-neutral-200 font-[400] mt-4 line-clamp-2'>
                            {item.tierDescription}
                        </h3>
                        <div className='rounded-[5px] bg-light-neutral-100 px-6 py-3 flex items-center mt-8'>
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                              <g clipPath="url(#clip0_1238_51)">
                                <path d="M2.67578 13.0988L3.01627 12.4306L2.67578 13.0988ZM1.40115 11.8242L2.0694 11.4837L1.40115 11.8242ZM11.2654 11.8242L10.5971 11.4837L11.2654 11.8242ZM9.99072 13.0988L9.65023 12.4306L9.99072 13.0988ZM9.99072 3.23461L9.65023 3.90286L9.99072 3.23461ZM11.2654 4.50924L10.5971 4.84973L11.2654 4.50924ZM2.67578 3.23461L3.01627 3.90286L2.67578 3.23461ZM1.40115 4.50924L2.0694 4.84973L1.40115 4.50924ZM11.5833 10.3334C11.169 10.3334 10.8333 10.6692 10.8333 11.0834C10.8333 11.4976 11.169 11.8334 11.5833 11.8334V10.3334ZM2.66659 2.91671C2.66659 3.33092 3.00237 3.66671 3.41659 3.66671C3.8308 3.66671 4.16659 3.33092 4.16659 2.91671H2.66659ZM3.48129 9.37492C3.18208 9.66135 3.17171 10.1361 3.45814 10.4353C3.74456 10.7346 4.21932 10.7449 4.51854 10.4585L3.48129 9.37492ZM8.14796 10.4585C8.44718 10.7449 8.92194 10.7346 9.20837 10.4353C9.4948 10.1361 9.48443 9.66135 9.18521 9.37492L8.14796 10.4585ZM5.74992 3.66671H6.91659V2.16671H5.74992V3.66671ZM10.8333 7.58337V8.75004H12.3333V7.58337H10.8333ZM6.91659 12.6667H5.74992V14.1667H6.91659V12.6667ZM1.83325 8.75004V7.58337H0.333252V8.75004H1.83325ZM5.74992 12.6667C4.9208 12.6667 4.34407 12.6661 3.89533 12.6295C3.45535 12.5935 3.20488 12.5267 3.01627 12.4306L2.33529 13.7671C2.77059 13.9889 3.24044 14.081 3.77318 14.1245C4.29717 14.1673 4.94555 14.1667 5.74992 14.1667V12.6667ZM0.333252 8.75004C0.333252 9.55441 0.332669 10.2028 0.37548 10.7268C0.419007 11.2595 0.511095 11.7294 0.732895 12.1647L2.0694 11.4837C1.97331 11.2951 1.90645 11.0446 1.8705 10.6046C1.83384 10.1559 1.83325 9.57916 1.83325 8.75004H0.333252ZM3.01627 12.4306C2.60859 12.2228 2.27713 11.8914 2.0694 11.4837L0.732895 12.1647C1.08443 12.8546 1.64536 13.4155 2.33529 13.7671L3.01627 12.4306ZM10.8333 8.75004C10.8333 9.57916 10.8327 10.1559 10.796 10.6046C10.7601 11.0446 10.6932 11.2951 10.5971 11.4837L11.9336 12.1647C12.1554 11.7294 12.2475 11.2595 12.291 10.7268C12.3338 10.2028 12.3333 9.55441 12.3333 8.75004H10.8333ZM6.91659 14.1667C7.72095 14.1667 8.36934 14.1673 8.89332 14.1245C9.42606 14.081 9.89591 13.9889 10.3312 13.7671L9.65023 12.4306C9.46163 12.5267 9.21115 12.5935 8.77117 12.6295C8.32244 12.6661 7.7457 12.6667 6.91659 12.6667V14.1667ZM10.5971 11.4837C10.3894 11.8914 10.0579 12.2228 9.65023 12.4306L10.3312 13.7671C11.0211 13.4155 11.5821 12.8546 11.9336 12.1647L10.5971 11.4837ZM6.91659 3.66671C7.7457 3.66671 8.32244 3.66729 8.77117 3.70395C9.21115 3.7399 9.46163 3.80676 9.65023 3.90286L10.3312 2.56635C9.89591 2.34455 9.42606 2.25246 8.89332 2.20894C8.36934 2.16612 7.72095 2.16671 6.91659 2.16671V3.66671ZM12.3333 7.58337C12.3333 6.77901 12.3338 6.13062 12.291 5.60664C12.2475 5.0739 12.1554 4.60405 11.9336 4.16874L10.5971 4.84973C10.6932 5.03833 10.7601 5.28881 10.796 5.72879C10.8327 6.17752 10.8333 6.75426 10.8333 7.58337H12.3333ZM9.65023 3.90286C10.0579 4.11059 10.3894 4.44204 10.5971 4.84973L11.9336 4.16874C11.5821 3.47881 11.0211 2.91789 10.3312 2.56635L9.65023 3.90286ZM5.74992 2.16671C4.94555 2.16671 4.29717 2.16612 3.77318 2.20894C3.24044 2.25246 2.77059 2.34455 2.33529 2.56635L3.01627 3.90286C3.20488 3.80676 3.45535 3.7399 3.89533 3.70395C4.34407 3.66729 4.9208 3.66671 5.74992 3.66671V2.16671ZM1.83325 7.58337C1.83325 6.75426 1.83384 6.17752 1.8705 5.72879C1.90645 5.28881 1.97331 5.03833 2.0694 4.84973L0.732895 4.16874C0.511095 4.60405 0.419007 5.0739 0.37548 5.60664C0.332669 6.13063 0.333252 6.77901 0.333252 7.58337H1.83325ZM2.33529 2.56635C1.64536 2.91789 1.08443 3.47881 0.732895 4.16874L2.0694 4.84973C2.27713 4.44204 2.60859 4.11059 3.01627 3.90286L2.33529 2.56635ZM5.74992 1.33337H10.9999V-0.166626H5.74992V1.33337ZM13.1666 3.50004V8.75004H14.6666V3.50004H13.1666ZM13.1666 8.75004C13.1666 9.62449 12.4577 10.3334 11.5833 10.3334V11.8334C13.2861 11.8334 14.6666 10.4529 14.6666 8.75004H13.1666ZM10.9999 1.33337C12.1965 1.33337 13.1666 2.30342 13.1666 3.50004H14.6666C14.6666 1.475 13.025 -0.166626 10.9999 -0.166626V1.33337ZM5.74992 -0.166626C4.04704 -0.166626 2.66659 1.21383 2.66659 2.91671H4.16659C4.16659 2.04226 4.87547 1.33337 5.74992 1.33337V-0.166626ZM4.51854 10.4585C5.51719 9.50253 7.14932 9.50253 8.14796 10.4585L9.18521 9.37492C7.60653 7.86372 5.05998 7.86372 3.48129 9.37492L4.51854 10.4585ZM7.14833 7.31323C7.14833 7.68577 6.82319 8.04308 6.3524 8.04308V9.54308C7.58919 9.54308 8.64833 8.57528 8.64833 7.31323H7.14833ZM6.3524 8.04308C5.8816 8.04308 5.55646 7.68577 5.55646 7.31323H4.05646C4.05646 8.57528 5.1156 9.54308 6.3524 9.54308V8.04308ZM5.55646 7.31323C5.55646 6.94068 5.8816 6.58337 6.3524 6.58337V5.08337C5.1156 5.08337 4.05646 6.05117 4.05646 7.31323H5.55646ZM6.3524 6.58337C6.82319 6.58337 7.14833 6.94068 7.14833 7.31323H8.64833C8.64833 6.05117 7.58919 5.08337 6.3524 5.08337V6.58337Z" fill="#282828"/>
                              </g>
                              <defs>
                                <clipPath id="clip0_1238_51">
                                  <rect width="14" height="14" fill="white" transform="translate(0.5)"/>
                                </clipPath>
                              </defs>
                            </svg>
                            <span className='ml-2 text-lg font-[500] text-dark-neutral-700'>
                                200
                            </span>
                            <span className='ml-[5px] text-dark-neutral-200 font-[400] text-lg'>
                                Backers
                            </span>
                            <div className={`${item.isEarlyBird ? '' : 'hidden'} ml-[100px] flex items-center`}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                                  <path d="M2.25 5.83333H12.75M5.75 2.91667H4.11667C3.46327 2.91667 3.13657 2.91667 2.88701 3.04383C2.66749 3.15568 2.48901 3.33416 2.37716 3.55368C2.25 3.80324 2.25 4.12994 2.25 4.78333V10.3833C2.25 11.0367 2.25 11.3634 2.37716 11.613C2.48901 11.8325 2.66749 12.011 2.88701 12.1228C3.13657 12.25 3.46327 12.25 4.11667 12.25H10.8833C11.5367 12.25 11.8634 12.25 12.113 12.1228C12.3325 12.011 12.511 11.8325 12.6228 11.613C12.75 11.3634 12.75 11.0367 12.75 10.3833V4.78333C12.75 4.12994 12.75 3.80324 12.6228 3.55368C12.511 3.33416 12.3325 3.15568 12.113 3.04383C11.8634 2.91667 11.5367 2.91667 10.8833 2.91667H9.25M5.75 2.91667H9.25M5.75 2.91667V2.625C5.75 2.14175 5.35825 1.75 4.875 1.75C4.39175 1.75 4 2.14175 4 2.625V2.91667M9.25 2.91667V2.625C9.25 2.14175 9.64175 1.75 10.125 1.75C10.6082 1.75 11 2.14175 11 2.625V2.91667" stroke="#282828" strokeWidth="1.5" strokeLinecap="round"/>
                                </svg>
                                <span className='ml-[5px] text-dark-neutral-200 font-[400] text-lg'>Ends on {
                                    new Intl.DateTimeFormat('en', {
                                        month: 'short',
                                        day: 'numeric'
                                      }).format(new Date(item.endingDate))
                                }</span>                                                    
                            </div>
                        </div>
                        <div className='flex gap-16 items-center mt-6'>
                            <button className='flex gap-[6px]' onClick={()=>router.push(`/${props.tiersLink}/${props.campaignId}/tiers/${item.tierId}`)}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
                                  <path d="M5.30008 14.6667V13.6667V14.6667ZM11.7001 14.6667V15.6667V14.6667ZM13.8334 3.46671H14.8334H13.8334ZM13.6881 2.06139L14.5791 1.6074V1.6074L13.6881 2.06139ZM11.7001 1.33337V0.333374V1.33337ZM13.1054 1.4787L13.5594 0.587693L13.5594 0.587692L13.1054 1.4787ZM13.1054 14.5214L13.5594 15.4124V15.4124L13.1054 14.5214ZM13.6881 13.9387L12.7971 13.4847L13.6881 13.9387ZM3.89476 14.5214L4.34875 13.6304L3.89476 14.5214ZM3.31207 13.9387L4.20308 13.4847L3.31207 13.9387ZM13.8334 5.33337L14.8334 5.33497V5.33337H13.8334ZM3.17954 13.3334L2.17954 13.335L2.17959 13.3647L2.1814 13.3943L3.17954 13.3334ZM13.8206 13.3334L14.8188 13.3943L14.8206 13.3647L14.8206 13.335L13.8206 13.3334ZM5.30008 15.6667H11.7001V13.6667H5.30008V15.6667ZM14.8334 3.46671C14.8334 3.10984 14.8342 2.78205 14.8119 2.50954C14.7887 2.22537 14.7356 1.91447 14.5791 1.6074L12.7971 2.51538C12.7859 2.49352 12.8055 2.51191 12.8186 2.67241C12.8326 2.84458 12.8334 3.07684 12.8334 3.46671L14.8334 3.46671ZM11.7001 2.33337C12.0899 2.33337 12.3222 2.33415 12.4944 2.34822C12.6549 2.36133 12.6733 2.38084 12.6514 2.3697L13.5594 0.587692C13.2523 0.431229 12.9414 0.378079 12.6572 0.354861C12.3847 0.332596 12.0569 0.333374 11.7001 0.333374L11.7001 2.33337ZM14.5791 1.6074C14.3554 1.16835 13.9984 0.811396 13.5594 0.587693L12.6514 2.3697C12.7141 2.40166 12.7651 2.45266 12.7971 2.51538L14.5791 1.6074ZM11.7001 15.6667C12.0569 15.6667 12.3847 15.6675 12.6572 15.6452C12.9414 15.622 13.2523 15.5689 13.5594 15.4124L12.6514 13.6304C12.6733 13.6192 12.6549 13.6388 12.4944 13.6519C12.3222 13.6659 12.09 13.6667 11.7001 13.6667V15.6667ZM13.5594 15.4124C13.9984 15.1887 14.3554 14.8317 14.5791 14.3927L12.7971 13.4847C12.7651 13.5474 12.7141 13.5984 12.6514 13.6304L13.5594 15.4124ZM5.30008 13.6667C4.91021 13.6667 4.67795 13.6659 4.50578 13.6519C4.34529 13.6388 4.32689 13.6192 4.34875 13.6304L3.44077 15.4124C3.74785 15.5689 4.05874 15.622 4.34292 15.6452C4.61542 15.6675 4.94322 15.6667 5.30008 15.6667L5.30008 13.6667ZM4.34875 13.6304C4.28603 13.5984 4.23504 13.5474 4.20308 13.4847L2.42107 14.3927C2.64477 14.8317 3.00172 15.1887 3.44077 15.4124L4.34875 13.6304ZM11.7001 0.333374L7.99517 0.333374L7.99517 2.33337L11.7001 2.33337L11.7001 0.333374ZM4.46097 5.45337L7.28807 2.62627L5.87385 1.21205L3.04675 4.03916L4.46097 5.45337ZM14.8334 5.33337V3.46671H12.8334V5.33337H14.8334ZM2.1814 13.3943C2.20043 13.706 2.24801 14.0531 2.42107 14.3927L4.20308 13.4847C4.21478 13.5077 4.19058 13.4837 4.17768 13.2724L2.1814 13.3943ZM12.8225 13.2724C12.8096 13.4837 12.7854 13.5077 12.7971 13.4847L14.5791 14.3927C14.7521 14.053 14.7997 13.706 14.8188 13.3943L12.8225 13.2724ZM2.16808 6.16527L2.17954 13.335L4.17954 13.3318L4.16807 6.16208L2.16808 6.16527ZM12.8334 5.33178L12.8206 13.3318L14.8206 13.335L14.8334 5.33497L12.8334 5.33178ZM7.99517 0.333374C7.19952 0.333374 6.43646 0.649444 5.87385 1.21205L7.28807 2.62627C7.47561 2.43873 7.72996 2.33337 7.99517 2.33337L7.99517 0.333374ZM3.04675 4.03916C2.48297 4.60294 2.1668 5.36796 2.16808 6.16527L4.16807 6.16208C4.16765 5.89631 4.27304 5.6413 4.46097 5.45337L3.04675 4.03916Z" fill="#5558DA"/>
                                </svg>
                                <span className='text-primary-purple-500 text-md font-[500]'>
                                    Includes 4 Objects
                                </span>
                            </button>
                            <button className='py-2 px-3 bg-primary-purple-500 text-md text-white text-center rounded-[4px] shadow-xs w-[338px]'>
                                Add to cart
                            </button>
                        </div>
                    </div>
                </div>
            ))}
        </div>
    </div>
  )
}

export default Tiers